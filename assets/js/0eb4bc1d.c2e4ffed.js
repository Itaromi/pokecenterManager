"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[990],{3726:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>p,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"Demarrage-rapide/Variables d\'environnement Secrets","title":"Variables d\'environnement Secrets","description":"Environnement de d\xe9veloppement (local)","source":"@site/docs/Demarrage-rapide/Variables d\'environnement Secrets.md","sourceDirName":"Demarrage-rapide","slug":"/Demarrage-rapide/Variables d\'environnement Secrets","permalink":"/pokecenterManager/docs/Demarrage-rapide/Variables d\'environnement Secrets","draft":false,"unlisted":false,"editUrl":"https://github.com/Itaromi/pokecenterManager/tree/main/docs/docs/Demarrage-rapide/Variables d\'environnement Secrets.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Installation locale avec Docker","permalink":"/pokecenterManager/docs/Demarrage-rapide/Installation locale avec Docker"},"next":{"title":"Lancer l\'api","permalink":"/pokecenterManager/docs/Demarrage-rapide/Lancer l\'api"}}');var t=r(4848),o=r(8453);const c={sidebar_position:2},i=void 0,a={},d=[{value:"Environnement de d\xe9veloppement (local)",id:"environnement-de-d\xe9veloppement-local",level:3},{value:"Environnement de production (Docker Secrets)",id:"environnement-de-production-docker-secrets",level:3}];function l(e){const n={code:"code",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h3,{id:"environnement-de-d\xe9veloppement-local",children:"Environnement de d\xe9veloppement (local)"}),"\n",(0,t.jsxs)(n.p,{children:["Utilise un fichier ",(0,t.jsx)(n.code,{children:".env"})," :"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dotenv",children:"DATABASE_HOST=db\nDATABASE_PORT=5432\nDATABASE_USER=monutilisateur\nDATABASE_PASSWORD=motdepassedelabase\nDATABASE_NAME=mabasepokemon\nENCRYPTION_SECRET=monSuperSecretPok\xe9123\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Ce fichier est ",(0,t.jsx)(n.strong,{children:"non versionn\xe9"})," (prot\xe9g\xe9 par ",(0,t.jsx)(n.code,{children:".gitignore"}),")."]}),"\n",(0,t.jsx)(n.h3,{id:"environnement-de-production-docker-secrets",children:"Environnement de production (Docker Secrets)"}),"\n",(0,t.jsxs)(n.p,{children:["Pour la production, remplace les variables sensibles par des ",(0,t.jsx)(n.strong,{children:"secrets Docker"}),"."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Cr\xe9er les secrets :"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'echo "motdepassedelabase" | docker secret create db_password -\necho "monSuperSecretPok\xe9123" | docker secret create encryption_secret -\n'})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsxs)(n.strong,{children:["Modifier le ",(0,t.jsx)(n.code,{children:"docker-compose.yml"})," :"]})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"services:\n  app:\n    secrets:\n      - db_password\n      - encryption_secret\n\nsecrets:\n  db_password:\n    external: true\n  encryption_secret:\n    external: true\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Lire les secrets dans le code :"})}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Dans ",(0,t.jsx)(n.code,{children:"data-source.ts"})," (via Node.js ",(0,t.jsx)(n.code,{children:"fs"}),") :"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"import fs from 'fs';\n\nconst getSecretOrEnv = (filePath: string, envVar: string): string => {\n  if (fs.existsSync(filePath)) {\n    return fs.readFileSync(filePath, 'utf8').trim();\n  }\n  return process.env[envVar] || '';\n};\n\nconst dbPassword = getSecretOrEnv('/run/secrets/db_password', 'DATABASE_PASSWORD');\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:["Cette m\xe9thode permet de garder les ",(0,t.jsx)(n.strong,{children:"cl\xe9s sensibles hors du code et des fichiers versionn\xe9s"})," \ud83d\udd10."]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>i});var s=r(6540);const t={},o=s.createContext(t);function c(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);