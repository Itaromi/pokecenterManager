"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[127],{3606:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"Architecture-technique","title":"Architecture technique","description":"Sch\xe9ma du projet (TypeORM, PostgreSQL, multi-tenant)","source":"@site/docs/Architecture-technique.md","sourceDirName":".","slug":"/Architecture-technique","permalink":"/pokecenterManager/docs/Architecture-technique","draft":false,"unlisted":false,"editUrl":"https://github.com/Itaromi/pokecenterManager/tree/main/docs/docs/Architecture-technique.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Architecture technique","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Api R\xe9r\xe9rence","permalink":"/pokecenterManager/docs/API-Reference"},"next":{"title":"Migration DB","permalink":"/pokecenterManager/docs/Migrations-DB"}}');var t=s(4848),i=s(8453);const c={title:"Architecture technique",sidebar_position:4},o=void 0,l={},d=[{value:"Sch\xe9ma du projet (TypeORM, PostgreSQL, multi-tenant)",id:"sch\xe9ma-du-projet-typeorm-postgresql-multi-tenant",level:3},{value:"Chiffrement AES (explication rapide)",id:"chiffrement-aes-explication-rapide",level:3},{value:"Docker Compose &amp; Secrets",id:"docker-compose--secrets",level:3}];function a(e){const n={blockquote:"blockquote",code:"code",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h3,{id:"sch\xe9ma-du-projet-typeorm-postgresql-multi-tenant",children:"Sch\xe9ma du projet (TypeORM, PostgreSQL, multi-tenant)"}),"\n",(0,t.jsxs)(n.p,{children:["L'architecture est bas\xe9e sur un mod\xe8le ",(0,t.jsx)(n.strong,{children:"multi-tenant avec bases de donn\xe9es s\xe9par\xe9es"})," :\n\xd2"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Une ",(0,t.jsx)(n.strong,{children:"base centrale"})," :"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Stocke les ",(0,t.jsx)(n.strong,{children:"comptes Pokecenter"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"G\xe8re la cr\xe9ation de bases secondaires."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Des ",(0,t.jsx)(n.strong,{children:"bases secondaires"})," (une par Pokecenter) :"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Stockent les ",(0,t.jsx)(n.strong,{children:"patients Pok\xe9mon"})," et leurs ",(0,t.jsx)(n.strong,{children:"soins"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Sch\xe9ma appliqu\xe9 \xe0 la cr\xe9ation via TypeORM + synchronize ou migrations."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"+-----------------------+\n| Base Centrale         |\n|-----------------------|\n| comptes Pokecenter    |\n+-----------------------+\n         |\n         | Cr\xe9e\n         v\n+-----------------------+\n| Base Secondaire (ex)  |\n|-----------------------|\n| patients Pok\xe9mon     |\n| soins Pok\xe9mon        |\n+-----------------------+\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Le backend utilise ",(0,t.jsx)(n.strong,{children:"TypeORM"})," pour la gestion des entit\xe9s et des migrations."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"chiffrement-aes-explication-rapide",children:"Chiffrement AES (explication rapide)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Algorithme :"})," AES-256-CBC"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Biblioth\xe8que :"})," ",(0,t.jsx)(n.code,{children:"crypto"})," natif Node.js"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Cl\xe9 :"})," Fournie via la variable d'environnement ",(0,t.jsx)(n.code,{children:"ENCRYPTION_SECRET"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"IV :"})," G\xe9n\xe9r\xe9 al\xe9atoirement pour chaque champ (stock\xe9 avec les donn\xe9es)"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Donn\xe9es chiffr\xe9es :"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Email"}),"\n",(0,t.jsx)(n.li,{children:"Nom du Pokecenter"}),"\n",(0,t.jsx)(n.li,{children:"Ville, R\xe9gion"}),"\n",(0,t.jsx)(n.li,{children:"Patients : Nom, Sexe, etc."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Cela permet de ",(0,t.jsx)(n.strong,{children:"prot\xe9ger les donn\xe9es sensibles"})," tout en les stockant en base PostgreSQL."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"docker-compose--secrets",children:"Docker Compose & Secrets"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Docker Compose"})," orchestre les services (API + PostgreSQL)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Secrets Docker"})," permettent de stocker les mots de passe et cl\xe9s sensibles de mani\xe8re s\xe9curis\xe9e (hors .env)."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Exemple :"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"secrets:\n  db_password:\n    external: true\n  encryption_secret:\n    external: true\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Les secrets sont ensuite mont\xe9s dans ",(0,t.jsx)(n.code,{children:"/run/secrets/"})," et lus dans le code via ",(0,t.jsx)(n.code,{children:"fs.readFileSync"}),"."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["\ud83d\udee1\ufe0f Cette approche permet de ",(0,t.jsx)(n.strong,{children:"renforcer la s\xe9curit\xe9"})," en environnement de production."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>o});var r=s(6540);const t={},i=r.createContext(t);function c(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);